!function(){function a(a){function b(){f.postMessage({id:1,data:a.webkitVisibilityState})}function c(a){var b=d(a.target,"A");if(b&&b.hasAttribute("href")){var c=b.getAttribute("href"),g=e(c);f.postMessage({id:2,data:g})}}function d(a,b){return a&&a.tagName?a.tagName.toUpperCase()==b?a:d(a.parentNode,b):null}function e(a){if(-1!=a.search(/^\/\//))return window.location.protocol+a;if(-1!=a.search(/:\/\//))return a;if(-1!=a.search(/^\//))return window.location.origin+a;var b=window.location.href.match(/(.*\/)/)[0];return b+a}var f=chrome.extension.connect({name:"page-state-tracker"});a.addEventListener("webkitvisibilitychange",b,!1),a.addEventListener("contextmenu",c,!1),b()}new a(document)}();